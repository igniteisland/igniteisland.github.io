import{n as $}from"./TheIslandNavbar-Wlv6MGKX.js";import{u as T,r as u,j as h,c as v,b as a,d as V,a as O,h as f,w,p as _,n as E,t as P,o as p,_ as A,f as R,g as S}from"./index-CgqFT2bs.js";const C={class:"request-wrap"},M={class:"header"},B={class:"controls"},G={class:"field"},U={class:"field"},z={class:"field grow"},F=["disabled"],H={key:0},J={key:1},L={key:0,class:"status error"},Y={key:1,class:"status ok"},j="https://script.google.com/macros/s/AKfycbw73aGzEMJBx0Aux32lqFVGI-hTzoGfQG_B9LvTHmhqxz7oS1RPSVMyXwlpMyDAqP6s/exec",Q=T({__name:"AssassinRequestSender",setup(I){const r=u(""),d=u(""),o=u(""),i=u(!1),t=u(""),b=u("");function y(){return new Date().toISOString()}function c(s){return(s??"").trim()}const x=h(()=>({mode:"createRequest",timestamp:y(),day:Number(r.value),playerId:c(d.value),target:c(o.value)}));h(()=>JSON.stringify(x.value,null,2));const D=h(()=>{if(i.value)return!0;const s=Number(r.value);return!Number.isFinite(s)||s<=0||!c(d.value)||!c(o.value)});async function N(){t.value="",b.value="";const s=Number(r.value),e=c(d.value),n=c(o.value);if(!Number.isFinite(s)||s<=0){t.value="Please enter a valid Day.";return}if(!e){t.value="Please enter your playerId.";return}if(!n){t.value="Please enter a target.";return}i.value=!0;try{const m=await fetch(j,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({mode:"createRequest",timestamp:y(),day:s,playerId:e,target:n})}),l=await m.json().catch(()=>({}));if(!m.ok||l?.ok===!1)throw new Error(l?.error||`Request failed (${m.status})`);const k=l?.action?String(l.action):"saved",g=l?.requestRowId??l?.requestRow??"",q=l?.assassinRowId??l?.assassinRow??"";b.value=`Request ${k}. ${g?`requestRowId=${g}. `:""}${q?`assassinRowId=${q}.`:""}`.trim(),o.value=""}catch(m){t.value=m?.message??"Failed to send request."}finally{i.value=!1}}return(s,e)=>(p(),v("div",C,[a("header",M,[e[6]||(e[6]=a("h2",{class:"title"},"üéØ Send Assassination Request",-1)),e[7]||(e[7]=a("p",{class:"subtitle"},[f(" Enter your "),a("b",null,"day"),f(", your "),a("b",null,"playerId"),f(", and your "),a("b",null,"target"),f(". You are only Allowed to send 2 ASSASSINATION REQUESTS in a day ")],-1)),a("div",B,[a("label",G,[e[3]||(e[3]=a("span",null,"Day",-1)),w(a("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>r.value=n),class:"input",type:"number",min:"1",placeholder:"e.g. 4"},null,512),[[_,r.value]])]),a("label",U,[e[4]||(e[4]=a("span",null,"Your Player ID",-1)),w(a("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>d.value=n),class:"input",type:"text",placeholder:"e.g. shura"},null,512),[[_,d.value]])]),a("label",z,[e[5]||(e[5]=a("span",null,"Target",-1)),w(a("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>o.value=n),class:"input",type:"text",placeholder:"Target player name"},null,512),[[_,o.value]])]),a("button",{class:E(["btn danger",{loading:i.value}]),onClick:N,disabled:D.value},[i.value?(p(),v("span",J,"Sending‚Ä¶")):(p(),v("span",H,"Send Request"))],10,F)]),t.value?(p(),v("p",L,"‚ùå "+P(t.value),1)):b.value?(p(),v("p",Y,"‚úÖ Request Send")):V("",!0),e[8]||(e[8]=O('<section class="devil-deals" data-v-cb89053c><h3 class="devil-title" data-v-cb89053c>ü™ß Deals with the Devil</h3><p class="devil-intro" data-v-cb89053c> The Assassin wanders, disoriented by the pace of the last three days. So many requests, and so few discussions. The constant noise has left him addled. He raises a signboard: <span class="quote" data-v-cb89053c>‚ÄúDeals with the Devil‚Äù</span></p><div class="deal" data-v-cb89053c><h4 class="deal-name" data-v-cb89053c>The Coward Deal</h4><p class="deal-text" data-v-cb89053c> Two six-sided dice (2d6) will be rolled. On a result at or above <b data-v-cb89053c>9</b>, the Assassin will attempt to carry out one request. On a result at or below <b data-v-cb89053c>3</b>, the Assassin will attempt to assassinate you. On any other result, nothing happens. To initiate this deal, approach me and vote for me. </p></div><div class="deal" data-v-cb89053c><h4 class="deal-name" data-v-cb89053c>The Lottery Deal</h4><p class="deal-text" data-v-cb89053c> One hundred-sided die (1d100) will be rolled. A roll of <b data-v-cb89053c>67</b>, <b data-v-cb89053c>69</b>, or a perfect <b data-v-cb89053c>100</b> grants one free assassination request. </p></div><div class="deal" data-v-cb89053c><h4 class="deal-name" data-v-cb89053c>The Gambler Deal</h4><p class="deal-text" data-v-cb89053c> You are given <b data-v-cb89053c>two</b> free assassination requests, however you must first make <b data-v-cb89053c>3</b> requests to assassinate yourself. </p></div><p class="deal-limit" data-v-cb89053c><b data-v-cb89053c>Only one deal may be taken per 3 days.</b></p></section>',1))])]))}}),K=A(Q,[["__scopeId","data-v-cb89053c"]]),X=T({name:"TheIslandHome",components:{navbar:$,AssassinReq:K},mounted(){document.body.style.background="#000000"}}),W={class:"main-container"};function Z(I,r,d,o,i,t){const b=S("navbar"),y=S("AssassinReq");return p(),v("div",null,[R(b),a("div",W,[R(y)])])}const se=A(X,[["render",Z]]);export{se as default};
