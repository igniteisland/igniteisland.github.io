import{_ as W,c as a,o as s,b as e,t as r,F as I,e as $,n as N,d as k,r as b,k as Q,j as A,u as Z,z as de,h as Y,w as M,p as j,m as re,i as ue,v as X,a as ce,A as ve,B as fe,f as z,g as J}from"./index-BOtnhHoh.js";import{n as ye}from"./TheIslandNavbar-C62Qct_n.js";const he={name:"IslandParlayCards",setup(){const f=b({}),n=b(""),h=b(!0);Q(async()=>{try{const d=await fetch("/data/season1Parlays.json");if(!d.ok)throw new Error("Failed to load parlay data");f.value=await d.json();const p=Object.keys(f.value),S=8,w=p.find(F=>Number(F.replace("Day ",""))===S);n.value=w||p[0]}catch(d){console.error(d)}finally{h.value=!1}});const y=A(()=>Object.keys(f.value)),C=()=>{const d=y.value.indexOf(n.value);d>0&&(n.value=y.value[d-1])},i=()=>{const d=y.value.indexOf(n.value);d<y.value.length-1&&(n.value=y.value[d+1])},v=A(()=>n.value?f.value[n.value]||{}:{});return{loading:h,selectedDay:n,dayList:y,prevDay:C,nextDay:i,playersForDay:v,totalCost:d=>Object.values(d).reduce((p,S)=>p+Number(S.worth||0),0),allHit:d=>{const p=Object.values(d),S=p.reduce((_,x)=>_+Number(x.worth||0),0),w=p.length===3&&p.every(_=>_.hit===1),F=S>=650;return w&&F},statusLabel:d=>d===0?"PENDING":d===1?"HIT":"MISS",earnedAmount:d=>Object.values(d).filter(p=>p.hit===1).reduce((p,S)=>p+Number(S.worth||0),0)}}},me={class:"casino-wrapper"},pe={class:"casino-header"},_e=["disabled"],be=["disabled"],Ee={class:"casino-day"},ge={key:0,class:"loading"},ke={key:1,class:"casino-grid"},Ce={class:"total-cost"},Se={key:0,class:"earned-amount"},xe={key:1,class:"returning"},Pe=["src"],Ae={class:"casino-name"},De={class:"parlay-stack"},Le={class:"parlay-text"},Te={class:"parlay-worth"},Re={class:"parlay-status"};function we(f,n,h,o,y,C){return s(),a("div",me,[e("div",pe,[e("button",{class:"nav-btn",onClick:n[0]||(n[0]=(...i)=>o.prevDay&&o.prevDay(...i)),disabled:o.selectedDay===o.dayList[0]}," â—€ ",8,_e),n[2]||(n[2]=e("h2",{class:"casino-title"}," Island Parlays ",-1)),e("button",{class:"nav-btn",onClick:n[1]||(n[1]=(...i)=>o.nextDay&&o.nextDay(...i)),disabled:o.selectedDay===o.dayList[o.dayList.length-1]}," â–¶ ",8,be)]),e("div",Ee,r(o.selectedDay),1),o.loading?(s(),a("div",ge,"Getting Parlaysâ€¦")):(s(),a("div",ke,[(s(!0),a(I,null,$(o.playersForDay,(i,v)=>(s(),a("div",{key:v,class:N(["casino-player",{gold:o.allHit(i.parlayCard)}])},[e("div",Ce," ðŸ§¾ "+r(o.totalCost(i.parlayCard)),1),o.earnedAmount(i.parlayCard)>0?(s(),a("div",Se," ðŸ’° "+r(o.earnedAmount(i.parlayCard)),1)):k("",!0),o.allHit(i.parlayCard)?(s(),a("div",xe," RETURNING ")):k("",!0),e("img",{src:i.profilePic,class:"casino-avatar"},null,8,Pe),e("h3",Ae,r(v),1),e("div",De,[(s(!0),a(I,null,$(i.parlayCard,(m,D)=>(s(),a("div",{key:D,class:N(["parlay-row",{pending:m.hit===0,hit:m.hit===1,miss:m.hit===2}])},[e("div",Le,r(m.parlay),1),e("div",Te,r(m.worth),1),e("div",Re,r(o.statusLabel(m.hit)),1)],2))),128))])],2))),128))]))])}const Oe=W(he,[["render",we],["__scopeId","data-v-2f7163a6"]]),Ie={name:"IslandParlayLeaderboard",setup(){const f=b({}),n=b({}),h=b(!0);Q(async()=>{try{const[i,v]=await Promise.all([fetch("/data/season1ParlayBase.json"),fetch("/data/season1Parlays.json")]);if(!i.ok||!v.ok)throw new Error("Failed to load leaderboard data");f.value=await i.json(),n.value=await v.json()}catch(i){console.error(i)}finally{h.value=!1}});const y=i=>{let v=0;return Object.values(n.value).forEach(m=>{m[i]?.parlayCard&&Object.values(m[i].parlayCard).forEach(D=>{D.hit===1&&(v+=Number(D.worth||0))})}),v},C=A(()=>Object.entries(f.value).map(([i,v])=>{const m=Number(v.base||0),D=Number(v.remove||0),R=y(i),H=m+R-D;return{name:i,total:H}}).sort((i,v)=>v.total-i.total));return{loading:h,leaderboard:C}}},$e={class:"leaderboard-wrapper"},Ne={key:0,class:"loading"},He={key:1,class:"leaderboard-table"},Fe={class:"rank"},Ue={class:"name"},Ge={class:"total"};function Be(f,n,h,o,y,C){return s(),a("div",$e,[n[1]||(n[1]=e("h2",{class:"leaderboard-title"},"ðŸ† Parlay Wealth Leaderboard",-1)),o.loading?(s(),a("div",Ne," Counting coinâ€¦ ")):(s(),a("div",He,[n[0]||(n[0]=e("div",{class:"leaderboard-header"},[e("span",null,"#"),e("span",null,"Player"),e("span",null,"Total ðŸ’°")],-1)),(s(!0),a(I,null,$(o.leaderboard,(i,v)=>(s(),a("div",{key:i.name,class:N(["leaderboard-row",{top:v===0}])},[e("span",Fe,"#"+r(v+1),1),e("span",Ue,r(i.name),1),e("span",Ge,"ðŸ’° "+r(i.total),1)],2))),128))]))])}const Me=W(Ie,[["render",Be],["__scopeId","data-v-14d9986d"]]),Ve={class:"parlay-wrap"},Ye={class:"parlay-header"},je={class:"header-left"},We={class:"submit-row"},qe=["disabled"],Ke={key:0},Xe={key:1},ze={key:0,class:"status error"},Je={key:1,class:"status ok"},Qe={key:2,class:"status warn"},Ze={class:"summary"},et={class:"pill"},tt={class:"value"},at={class:"pill"},st={class:"value"},lt={class:"progress"},it={class:"progress-text"},nt={key:0,class:"ok"},ot={class:"grid"},dt={class:"badge"},rt={class:"cards"},ut=["checked","disabled","onChange"],ct={class:"card-body"},vt={class:"card-top"},ft={class:"text"},yt={class:"value"},ht={key:0,class:"fill-note"},mt={class:"fill-label"},pt=["onUpdate:modelValue"],_t=["onUpdate:modelValue"],bt=["onUpdate:modelValue"],Et=["onUpdate:modelValue"],gt={key:1,class:"fill-warning"},kt={class:"footer"},Ct={class:"selected"},St={key:0},xt={class:"line"},Pt={key:0,class:"detail-preview"},At={key:1,class:"detail-missing"},Dt={class:"money"},Lt=["onClick"],Tt={key:1,class:"muted"},Rt={class:"actions"},wt=["disabled"],Ot=["disabled"],It={key:0,class:"copy-status"},T=3,B=650,g=100,L=200,P=350,$t="https://script.google.com/macros/s/AKfycbz6aGrnk2PeRgwxiaJYBFxvuEgfxreSULDOkmUPA7Ps_LYFwPE95XgyYiDy6H-SWh9q/exec",Nt=Z({__name:"TheIslandParlayPicker",setup(f){const n=ve(),h=b(""),o=b(!1),y=b(""),C=b(""),i=b(""),v=[{id:"e1",difficulty:"easy",value:g,text:"`BARD` is playing a song for `PLAYER X`"},{id:"e2",difficulty:"easy",value:g,text:"`BARD` is playing a song to make weather `SELECTED PLAYER` for tomorrow"},{id:"e3",difficulty:"easy",value:g,text:"`BARD` is telling a story for The Island"},{id:"e4",difficulty:"easy",value:g,text:"Builder is building `SELECTED SPECIAL BUILD`"},{id:"e5",difficulty:"easy",value:g,text:"`PLAYER X` has received Blacksmith Armor"},{id:"e6",difficulty:"easy",value:g,text:"`MACHETE FROM HELL` will be given to `PLAYER X`"},{id:"e7",difficulty:"easy",value:g,text:"Interrogator will be interrogating `PLAYER X`"},{id:"e8",difficulty:"easy",value:g,text:"Jailor has jailed `PLAYER X`"},{id:"e9",difficulty:"easy",value:g,text:"Priest has given the Cross Pendant to `PLAYER X`"},{id:"e10",difficulty:"easy",value:g,text:"Teacher has buffed `PLAYER X`"},{id:"e11",difficulty:"easy",value:g,text:"`COOK` has made `SPECIAL FOOD`"},{id:"e12",difficulty:"easy",value:g,text:"`FARMER` has grown `SELECTED SPECIAL CROP`"},{id:"e13",difficulty:"easy",value:g,text:"Clothes will be `GOOD/BAD`"},{id:"m1",difficulty:"medium",value:L,text:"`FISHER` has caught `SELECTED SPECIAL ITEM`"},{id:"m2",difficulty:"medium",value:L,text:"`HUNTER` has caught `SELECTED SPECIAL ANIMAL`"},{id:"m3",difficulty:"medium",value:L,text:"`NIGHTGUARD` has spotted the `CANNIBAL`"},{id:"m4",difficulty:"medium",value:L,text:"`NIGHTGUARD` has spotted the `WEREWOLF`"},{id:"m5",difficulty:"medium",value:L,text:"`CANNIBAL` attacked from `SELECTED SIDE`"},{id:"m6",difficulty:"medium",value:L,text:"`WEREWOLF` attacked from `SELECTED SIDE`"},{id:"m7",difficulty:"medium",value:L,text:"Weather will be `SELECTED WEATHER`"},{id:"m8",difficulty:"medium",value:L,text:"Island Eye Color will be `COLOR`"},{id:"h1",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has been kicked off with `X` amount of votes"},{id:"h2",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has been killed by Cannibal"},{id:"h3",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has been killed by Werewolf"},{id:"h4",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has died due to poison"},{id:"h5",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has died due to the Island Conditions"},{id:"h6",difficulty:"hard",value:P,text:"`SELECTED PLAYER` has died to Killer Whale Gang/Lizard Gang"},{id:"h7",difficulty:"hard",value:P,text:"HUNTER has caught `SIF, THE GREAT GREY WOLF`"},{id:"h8",difficulty:"hard",value:P,text:"FISHER has caught `MOBY DICK'S HARPOON`"},{id:"h9",difficulty:"hard",value:P,text:"SCAVENGER has found an Artifact"}],m=new Set(["BARD","COOK","FARMER","FISHER","HUNTER","NIGHTGUARD","CANNIBAL","WEREWOLF","SCAVENGER","MACHETE FROM HELL","MOBY DICK'S HARPOON","SIF, THE GREAT GREY WOLF"]);function D(l){return(l.match(/`([^`]+)`/g)||[]).map(u=>u.replace(/`/g,"").trim())}function R(l){return D(l.text).filter(u=>!m.has(u.toUpperCase()))}function H(l){const t=l.trim().toUpperCase();return t==="X"?"number":t==="GOOD/BAD"?"choice_goodbad":t==="SELECTED SIDE"?"choice_side":"text"}const d=de({});function p(l){d[l]||(d[l]={})}function S(l){const t=R(l);return t.length===0?!0:(p(l.id),t.every(u=>String(d[l.id][u]||"").trim().length>0))}function w(l){const t=R(l);return t.length===0?"":(p(l.id),t.map(u=>`${u}=${String(d[l.id][u]||"").trim()}`).join("; "))}function F(l){return w(l)}const _=b([]),x=A(()=>_.value.length),U=A(()=>_.value.map(l=>v.find(t=>t.id===l)).filter(Boolean)),G=A(()=>U.value.reduce((l,t)=>l+t.value,0)),ee=A(()=>Math.max(0,Math.min(100,Math.round(G.value/B*100)))),q=A(()=>U.value.every(S)),te=A(()=>!!(o.value||!h.value.trim()||x.value!==T||!q.value)),ae=A(()=>[{id:"easy",label:"Easy",value:g,options:v.filter(l=>l.difficulty==="easy")},{id:"medium",label:"Medium",value:L,options:v.filter(l=>l.difficulty==="medium")},{id:"hard",label:"Hard",value:P,options:v.filter(l=>l.difficulty==="hard")}]);function V(l){return _.value.includes(l)}function K(l){return!V(l)&&_.value.length>=T}function se(l){const t=_.value.indexOf(l.id);if(t>=0){_.value.splice(t,1);return}_.value.length<T&&(_.value.push(l.id),p(l.id))}function le(l){const t=_.value.indexOf(l);t>=0&&_.value.splice(t,1)}function ie(){_.value=[],h.value="",y.value="",C.value="",i.value=""}async function ne(){const l=["**Island Parlay Card**",`Player: ${h.value.trim()||"(unknown)"}`,`Picked: ${x.value}/${T} | Total: $${G.value} | Goal: $${B}`,"",...U.value.map((t,u)=>{const c=w(t);return`${u+1}. [${t.difficulty.toUpperCase()}] (-$${t.value}) ${t.text}${c?" â€” "+c:""}`})];try{await navigator.clipboard.writeText(l.join(`
`)),i.value="Copied âœ…",setTimeout(()=>i.value="",1500)}catch{i.value="Copy failed"}}async function oe(){if(y.value="",C.value="",!h.value.trim()){y.value="Enter your name.";return}if(x.value!==T){y.value=`Pick exactly ${T} options.`;return}if(!q.value){y.value="Fill all required fields for each selected pick.";return}const l={playerName:h.value.trim(),totalValue:G.value,submittedAt:new Date().toISOString(),selected:U.value.map(t=>({id:t.id,difficulty:t.difficulty,value:t.value,text:t.text,detail:w(t)}))};o.value=!0;try{await fetch($t,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(l)}),C.value="Submitted! Redirectingâ€¦",setTimeout(()=>n.push("/WestCarcosa"),800)}catch(t){y.value=t?.message||String(t)}finally{o.value=!1}}return(l,t)=>(s(),a("div",Ve,[e("header",Ye,[e("div",je,[t[4]||(t[4]=e("h2",{class:"title"},"Island Parlay Card",-1)),e("p",{class:"subtitle"},[t[2]||(t[2]=Y(" Pick exactly ",-1)),e("b",null,r(T)),t[3]||(t[3]=Y(" options. Fill every required field (anything in backticks that isnâ€™t a role). ",-1))]),e("div",We,[M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>h.value=u),class:"detail name-input",type:"text",placeholder:"Your name (required)",autocomplete:"name"},null,512),[[j,h.value]]),e("button",{class:N(["btn",{loading:o.value}]),onClick:oe,disabled:te.value},[o.value?(s(),a("span",Xe,"Submittingâ€¦")):(s(),a("span",Ke,"Submit"))],10,qe)]),y.value?(s(),a("p",ze,"âŒ "+r(y.value),1)):k("",!0),C.value?(s(),a("p",Je,"âœ… "+r(C.value),1)):k("",!0),x.value&&!q.value?(s(),a("p",Qe," âš ï¸ Fill all required fields for your selected picks. ")):k("",!0)]),e("div",Ze,[e("div",et,[t[5]||(t[5]=e("span",{class:"label"},"Picked",-1)),e("span",tt,r(x.value)+"/"+r(T),1)]),e("div",at,[t[6]||(t[6]=e("span",{class:"label"},"Total",-1)),e("span",st,"$"+r(G.value),1)]),e("div",{class:"pill"},[t[7]||(t[7]=e("span",{class:"label"},"Goal",-1)),e("span",{class:"value"},"$"+r(B))]),e("div",lt,[e("div",{class:"progress-bar",style:re({width:ee.value+"%"})},null,4)]),e("div",it,[t[8]||(t[8]=e("span",null,"Progress:",-1)),e("b",null,r(Math.min(G.value,B)),1),Y(" / "+r(B)+" "),G.value>=B?(s(),a("span",nt,"âœ… Eligible")):k("",!0)])])]),e("div",ot,[(s(!0),a(I,null,$(ae.value,u=>(s(),a("section",{class:"group",key:u.id},[e("div",{class:N(["group-head",u.id])},[e("h3",null,r(u.label),1),e("span",dt,"-$"+r(u.value),1)],2),e("div",rt,[(s(!0),a(I,null,$(u.options,c=>(s(),a("label",{key:c.id,class:N(["card",{selected:V(c.id),disabled:K(c.id),incomplete:V(c.id)&&!S(c)}])},[e("input",{type:"checkbox",class:"check",checked:V(c.id),disabled:K(c.id),onChange:E=>se(c)},null,40,ut),e("div",ct,[e("div",vt,[e("p",ft,r(c.text),1),e("span",yt,"-$"+r(c.value),1)]),V(c.id)?(s(),a("div",{key:0,class:"fill-wrap",onClick:t[1]||(t[1]=ue(()=>{},["stop"]))},[R(c).length===0?(s(),a("div",ht," No extra fields required. ")):k("",!0),(s(!0),a(I,null,$(R(c),E=>(s(),a("div",{key:E,class:"fill-row"},[e("label",mt,r(E),1),H(E)==="choice_goodbad"?M((s(),a("select",{key:0,"onUpdate:modelValue":O=>d[c.id][E]=O,class:"fill-input"},t[9]||(t[9]=[e("option",{value:"",disabled:""},"Selectâ€¦",-1),e("option",{value:"GOOD"},"GOOD",-1),e("option",{value:"BAD"},"BAD",-1)]),8,pt)),[[X,d[c.id][E]]]):H(E)==="choice_side"?M((s(),a("select",{key:1,"onUpdate:modelValue":O=>d[c.id][E]=O,class:"fill-input"},t[10]||(t[10]=[ce('<option value="" disabled data-v-ac2164ba>Selectâ€¦</option><option value="NORTH" data-v-ac2164ba>NORTH</option><option value="SOUTH" data-v-ac2164ba>SOUTH</option><option value="EAST" data-v-ac2164ba>EAST</option><option value="WEST" data-v-ac2164ba>WEST</option>',5)]),8,_t)),[[X,d[c.id][E]]]):H(E)==="number"?M((s(),a("input",{key:2,type:"number",min:"0",step:"1","onUpdate:modelValue":O=>d[c.id][E]=O,class:"fill-input",placeholder:"Enter numberâ€¦",inputmode:"numeric"},null,8,bt)),[[j,d[c.id][E]]]):M((s(),a("input",{key:3,type:"text","onUpdate:modelValue":O=>d[c.id][E]=O,class:"fill-input",placeholder:"Type selectionâ€¦"},null,8,Et)),[[j,d[c.id][E]]])]))),128)),S(c)?k("",!0):(s(),a("div",gt," Fill all required fields for this pick. "))])):k("",!0)])],2))),128))])]))),128))]),e("footer",kt,[e("div",Ct,[e("h4",null,"Selected ("+r(x.value)+")",1),U.value.length?(s(),a("ul",St,[(s(!0),a(I,null,$(U.value,u=>(s(),a("li",{key:u.id},[e("span",{class:N(["dot",u.difficulty])},null,2),e("span",xt,[Y(r(u.text)+" ",1),F(u)?(s(),a("span",Pt," â€” "+r(F(u)),1)):k("",!0),S(u)?k("",!0):(s(),a("span",At," (missing fields) "))]),e("span",Dt,"-$"+r(u.value),1),e("button",{class:"remove",onClick:c=>le(u.id)},"Remove",8,Lt)]))),128))])):(s(),a("p",Tt,"Nothing selected yet."))]),e("div",Rt,[e("button",{class:"btn ghost",onClick:ie,disabled:x.value===0||o.value}," Clear ",8,wt),e("button",{class:"btn",onClick:ne,disabled:x.value===0||o.value}," Copy Card Text ",8,Ot)]),i.value?(s(),a("p",It,r(i.value),1)):k("",!0)])]))}}),Ht=W(Nt,[["__scopeId","data-v-ac2164ba"]]),Ft=Z({name:"TheParlayHome",components:{Cards:Oe,leaderboard:Me,navbar:ye,ParlayPicker:Ht},setup(){const f=b(""),n=b(!1),h=b(!1),o="condition";function y(){f.value===o?(n.value=!0,h.value=!1):h.value=!0}return{passwordInput:f,isUnlocked:n,error:h,unlock:y}},mounted(){document.body.style.background="linear-gradient(90deg,rgba(0, 0, 0, 1) 0%, rgba(75, 0, 102, 1) 100%)"}}),Ut={key:0,class:"lock-screen"},Gt={class:"lock-box"},Bt={key:0,class:"error"},Mt={key:1},Vt={class:"main-container"};function Yt(f,n,h,o,y,C){const i=J("navbar"),v=J("ParlayPicker");return s(),a("div",null,[f.isUnlocked?(s(),a("div",Mt,[z(i),e("div",Vt,[z(v)])])):(s(),a("div",Ut,[e("div",Gt,[n[3]||(n[3]=e("h2",null,"Enter Access Code",-1)),M(e("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>f.passwordInput=m),type:"password",placeholder:"Password",onKeyup:n[1]||(n[1]=fe((...m)=>f.unlock&&f.unlock(...m),["enter"]))},null,544),[[j,f.passwordInput]]),e("button",{onClick:n[2]||(n[2]=(...m)=>f.unlock&&f.unlock(...m))},"Unlock"),f.error?(s(),a("p",Bt,"Incorrect password")):k("",!0)])]))])}const qt=W(Ft,[["render",Yt],["__scopeId","data-v-c6d4a3b7"]]);export{qt as default};
