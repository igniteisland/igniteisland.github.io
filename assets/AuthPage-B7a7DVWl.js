import{u as x,r as l,k as _,c as p,b as s,h as b,t as g,w as m,p as y,o as c}from"./index-gLaTdWCb.js";import{s as i}from"./supabase-B1cBYtZ_.js";const S={style:{"max-width":"520px",margin:"40px auto",padding:"16px"}},k={key:0,style:{margin:"12px 0",padding:"12px",border:"1px solid #333","border-radius":"12px"}},C=["disabled"],U={key:1,style:{display:"grid",gap:"10px","margin-top":"12px"}},V={style:{display:"flex",gap:"10px"}},A=["disabled"],B=["disabled"],D={style:{"margin-top":"12px",opacity:".85"}},N=x({__name:"AuthPage",setup(E){const o=l(""),u=l(""),a=l(""),n=l(!1),r=l(null);async function v(){const{data:e,error:t}=await i.auth.getUser();if(t){r.value=null;return}r.value=e.user?.email??null}_(async()=>{await v(),i.auth.onAuthStateChange(async()=>{await v()})});async function f(){n.value=!0,a.value="";try{const{error:e}=await i.auth.signUp({email:o.value,password:u.value});if(e)throw e;a.value="Signed up! Check your email if confirmation is enabled."}catch(e){a.value=e.message??String(e)}finally{n.value=!1}}async function h(){n.value=!0,a.value="";try{const{error:e}=await i.auth.signInWithPassword({email:o.value,password:u.value});if(e)throw e;a.value="Signed in."}catch(e){a.value=e.message??String(e)}finally{n.value=!1}}async function w(){n.value=!0,a.value="";try{const{error:e}=await i.auth.signOut();if(e)throw e;a.value="Signed out."}catch(e){a.value=e.message??String(e)}finally{n.value=!1}}return(e,t)=>(c(),p("div",S,[t[3]||(t[3]=s("h1",null,"Account",-1)),r.value?(c(),p("div",k,[s("div",null,[t[2]||(t[2]=b("Signed in as: ",-1)),s("b",null,g(r.value),1)]),s("button",{disabled:n.value,onClick:w,style:{"margin-top":"10px"}},"Sign out",8,C)])):(c(),p("div",U,[m(s("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),placeholder:"email"},null,512),[[y,o.value]]),m(s("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>u.value=d),type:"password",placeholder:"password"},null,512),[[y,u.value]]),s("div",V,[s("button",{disabled:n.value,onClick:h},"Sign in",8,A),s("button",{disabled:n.value,onClick:f},"Sign up",8,B)])])),s("p",D,g(a.value),1)]))}});export{N as default};
