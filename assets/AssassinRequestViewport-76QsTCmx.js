import{n as V}from"./TheIslandNavbar-DFYHLj8z.js";import{u as I,r as c,j as b,c as p,b as s,d as D,h as _,w as g,p as R,n as E,t as P,o as m,_ as A,f as S,g as h}from"./index-C5dtlzIh.js";const C={class:"request-wrap"},M={class:"header"},B={class:"controls"},O={class:"field"},U={class:"field"},z={class:"field grow"},F=["disabled"],G={key:0},H={key:1},J={key:0,class:"status error"},j={key:1,class:"status ok"},L="https://script.google.com/macros/s/AKfycbw73aGzEMJBx0Aux32lqFVGI-hTzoGfQG_B9LvTHmhqxz7oS1RPSVMyXwlpMyDAqP6s/exec",Q=I({__name:"AssassinRequestSender",setup(x){const r=c(""),u=c(""),l=c(""),i=c(!1),a=c(""),v=c("");function f(){return new Date().toISOString()}function d(t){return(t??"").trim()}const N=b(()=>({mode:"createRequest",timestamp:f(),day:Number(r.value),playerId:d(u.value),target:d(l.value)}));b(()=>JSON.stringify(N.value,null,2));const T=b(()=>{if(i.value)return!0;const t=Number(r.value);return!Number.isFinite(t)||t<=0||!d(u.value)||!d(l.value)});async function $(){a.value="",v.value="";const t=Number(r.value),e=d(u.value),n=d(l.value);if(!Number.isFinite(t)||t<=0){a.value="Please enter a valid Day.";return}if(!e){a.value="Please enter your playerId.";return}if(!n){a.value="Please enter a target.";return}i.value=!0;try{const y=await fetch(L,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({mode:"createRequest",timestamp:f(),day:t,playerId:e,target:n})}),o=await y.json().catch(()=>({}));if(!y.ok||o?.ok===!1)throw new Error(o?.error||`Request failed (${y.status})`);const k=o?.action?String(o.action):"saved",w=o?.requestRowId??o?.requestRow??"",q=o?.assassinRowId??o?.assassinRow??"";v.value=`Request ${k}. ${w?`requestRowId=${w}. `:""}${q?`assassinRowId=${q}.`:""}`.trim(),l.value=""}catch(y){a.value=y?.message??"Failed to send request."}finally{i.value=!1}}return(t,e)=>(m(),p("div",C,[s("header",M,[e[6]||(e[6]=s("h2",{class:"title"},"üéØ Send Assassination Request",-1)),e[7]||(e[7]=s("p",{class:"subtitle"},[_(" Enter your "),s("b",null,"day"),_(", your "),s("b",null,"playerId"),_(", and your "),s("b",null,"target"),_(". You are only Allowed to send 2 ASSASSINATION REQUESTS ")],-1)),s("div",B,[s("label",O,[e[3]||(e[3]=s("span",null,"Day",-1)),g(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>r.value=n),class:"input",type:"number",min:"1",placeholder:"e.g. 4"},null,512),[[R,r.value]])]),s("label",U,[e[4]||(e[4]=s("span",null,"Your Player ID",-1)),g(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>u.value=n),class:"input",type:"text",placeholder:"e.g. shura"},null,512),[[R,u.value]])]),s("label",z,[e[5]||(e[5]=s("span",null,"Target",-1)),g(s("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.value=n),class:"input",type:"text",placeholder:"Target player name"},null,512),[[R,l.value]])]),s("button",{class:E(["btn danger",{loading:i.value}]),onClick:$,disabled:T.value},[i.value?(m(),p("span",H,"Sending‚Ä¶")):(m(),p("span",G,"Send Request"))],10,F)]),a.value?(m(),p("p",J,"‚ùå "+P(a.value),1)):v.value?(m(),p("p",j,"‚úÖ Request Send")):D("",!0)])]))}}),Y=A(Q,[["__scopeId","data-v-c6a771ca"]]),K=I({name:"TheIslandHome",components:{navbar:V,AssassinReq:Y},mounted(){document.body.style.background="#000000"}}),X={class:"main-container"};function W(x,r,u,l,i,a){const v=h("navbar"),f=h("AssassinReq");return m(),p("div",null,[S(v),s("div",X,[S(f)])])}const se=A(K,[["render",W]]);export{se as default};
